# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1

# commands:
#   print_id:
#     parameters:
#       to:
#         default: $CIRCLE_WORKFLOW_ID
#         type: string
#     steps:
#       - run: echo "Pipeline ID is <<parameters.to>>"


# Define a job to be invoked later in a workflow.
# See: https://circleci.com/docs/2.0/configuration-reference/#jobs
jobs:
  fail_step:
    docker:
      - image: circleci/node:13.8.0
    steps:
      - checkout
      - run: return 1
  
  if_fail:
    docker:
      - image: circleci/node:13.8.0
    steps:
      - checkout
      - run:
            name: Upload Failed Tests
            command: curl --data fail_tests.log http://example.com/error_logs
            when: on_fail
      


# Invoke jobs via workflows
# See: https://circleci.com/docs/2.0/configuration-reference/#workflows
workflows:
  fail_step-workflow:
    jobs:
      - fail_step
      - if_fail

 